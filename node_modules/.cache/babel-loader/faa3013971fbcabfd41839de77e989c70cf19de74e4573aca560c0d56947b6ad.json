{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapActions } from \"vuex\";\nimport { url, endpointCodes } from \"../../global/index\";\nexport default {\n  data() {\n    return {\n      url: url,\n      endpointCodes,\n      acta: false\n    };\n  },\n  async created() {\n    await this.obtenerCarritos();\n    await this.getIdentity();\n  },\n  computed: {\n    carrito() {\n      return this.$store.getters[\"carrito/getcar\"];\n    },\n    update() {\n      let data = this.$store.getters[\"carrito/getupd\"];\n      if (Array.isArray(data.items)) {\n        for (var i = 0; i < data.items.length; i++) {\n          if (data.items[i].cantidad != this.carrito.items[i].cantidad) {\n            this.upd = true;\n            break;\n          } else {\n            this.upd = false;\n          }\n        }\n      }\n      return data;\n    },\n    identity() {\n      return this.$store.getters[\"admin/getIdentity\"];\n    }\n  },\n  methods: {\n    ...mapActions(\"carrito\", [\"getCart\"]),\n    ...mapActions(\"carrito\", [\"getCartCopy\"]),\n    close() {\n      this.$router.push(\"/\").catch(err => {});\n      this.$emit(\"close\");\n    },\n    async obtenerCarritos() {\n      await this.getCart();\n      await this.getCartCopy();\n    },\n    getIdentity: async function () {\n      let response = await this.$store.dispatch(\"admin/getData\");\n      return response;\n    },\n    toCheckout: async function () {\n      //await this.obtenerCarritos();\n      let payload = {\n        carrito: this.carrito\n      };\n      let result = await this.$store.dispatch(\"carrito/validateCrt\", {\n        option: \"valid_cart\",\n        item: payload\n      });\n      if (result.status == \"error\") {\n        this.status = \"error\";\n        this.message = result.message; // result.message;\n        //this.delStatus();\n      } else {\n        // success\n        //si todo esta correcto redireccionar.\n        localStorage.getItem(\"lastv\");\n        localStorage.setItem(\"lastv\", \"car\");\n        return this.$router.push(\"/check-out\").catch(err => {});\n      }\n    },\n    actualizarCarrito: async function (carrito, key) {\n      let payload = {\n        carrito\n      };\n      let result = await this.$store.dispatch(\"carrito/editItemCrt\", {\n        option: \"upt_item\",\n        item: payload\n      });\n      if (result.status == \"error\") {\n        this.status = \"error\";\n        this.message = \"Ha ocurrido un error al intentar actualizar el carrito.\"; // result.message;\n      } else {\n        // success\n\n        await this.obtenerCarritos();\n        this.status = \"success\";\n        this.message = \"Carrito actualizado\";\n        this.acta = false;\n        if (this.update.items.length == 0) {\n          this.close();\n        }\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";AAgGA;AACA;AACA;EACAA;IACA;MACAC;MACAC;MACAC;IACA;EACA;EACA;IACA;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;MAEA;QACA;UACA;YACA;YACA;UACA;YACA;UACA;QACA;MACA;MACA;IACA;IACAC;MACA;IACA;EACA;EACAC;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IAEAC;MACA;MACA;QACAN;MACA;MACA;QACAO;QACAC;MACA;MAEA;QACA;QACA;QACA;MACA;QACA;QACA;QACAC;QACAA;QACA;MACA;IACA;IAEAC;MACA;QACAV;MACA;MACA;QACAO;QACAC;MACA;MAEA;QACA;QACA,eACA;MACA;QACA;;QAEA;QACA;QACA;QACA;QACA;UACA;QACA;MACA;IACA;EACA;AACA","names":["data","url","endpointCodes","acta","computed","carrito","update","identity","methods","close","getIdentity","toCheckout","option","item","localStorage","actualizarCarrito"],"sourceRoot":"src/views/carrito","sources":["modalCar.vue"],"sourcesContent":["<template >\r\n  <!--MODAL BODY-->\r\n  <div class=\"modalCar\" @click=\"close\" v-if=\"carrito.items\">\r\n    <!--MODAL CONTAINER-->\r\n    <div class=\"modalc\" @click.stop>\r\n      <div class=\"carr-b\"\r\n         >\r\n        <!--TITLE-->\r\n        <div class=\"tlc\">\r\n          <p class=\"title\">\r\n            Carrito de la compra\r\n            <span v-if=\"carrito\">{{ carrito.items.length }}</span>\r\n          </p>\r\n          <img\r\n            src=\"../../assets/cross.svg\"\r\n            alt=\"cross\"\r\n            class=\"cross\"\r\n            @click=\"close\"\r\n          />\r\n        </div>\r\n        <!--PRODUCT LIST-->\r\n        <div\r\n          class=\"prod-list\"\r\n          :class=\"{ scroll: carrito.items.length > 2 }\"\r\n        >\r\n          <div class=\"product-c\" v-for=\"(c, i) in carrito.items\" :key=\"i\">\r\n            <!--PRODUCT INFO-->\r\n            <div class=\"dflx proinfo\">\r\n              <img\r\n                :src=\"\r\n                  url + '/' + endpointCodes.get + '/product-img/' + c.item.image\r\n                \"\r\n                alt=\"product\"\r\n                class=\"prod\"\r\n                v-if=\"c.item.image !== ''\"\r\n              />\r\n              <img\r\n                src=\"../../assets/noimg.png\"\r\n                alt=\"product\"\r\n                class=\"prod\"\r\n                v-else\r\n              />\r\n              <section>\r\n                <p class=\"tl\">{{ c.item.name+(c.item.product_atributo_valores !== null ? \" (\"+c.item.product_atributo_valores[0].valor+\" \"+c.item.product_atributo_valores[0].atributo+\")\"\r\n                :'') }}</p>\r\n                <p class=\"sbtl\">\r\n                  {{ c.item.descr }}\r\n                </p>\r\n              </section>\r\n            </div>\r\n            <!--COUNTER AND PRICE CONTAINER-->\r\n            <div class=\"c-p-cont\">\r\n              <div class=\"counter\" v-if=\"carrito.items\">\r\n                <p\r\n                  class=\"btn\"\r\n                  @click=\"(c.cantidad -= 1) && (acta = true)\"\r\n                  :class=\"{ eventBlock: c.cantidad == 0 }\"\r\n                >\r\n                  -\r\n                </p>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"number\"\r\n                  id=\"text\"\r\n                  class=\"text\"\r\n                  v-model=\"c.cantidad\"\r\n                />\r\n                <p class=\"btn\" @click=\"(c.cantidad += 1) && (acta = true)\">+</p>\r\n              </div>\r\n              <hr />\r\n              <div class=\"price\">${{ c.item.price * c.cantidad }}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!--SUBTOTAL-->\r\n        <div class=\"subt-c\">\r\n          <p>\r\n            Subtotal: <span>${{ carrito.subtotal }}</span>\r\n          </p>\r\n        </div>\r\n        <!--FINALIZAR COMPRA-->\r\n        <div class=\"dflx\">\r\n          <div\r\n            class=\"btn-fc yll\"\r\n            @click=\"actualizarCarrito(carrito)\"\r\n            :class=\"{ eventBlock: acta == false }\"\r\n          >\r\n            Actualizar carrito\r\n          </div>\r\n          <div class=\"btn-fc\" @click=\"toCheckout()\">Finalizar compra</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapActions } from \"vuex\";\r\nimport { url, endpointCodes } from \"../../global/index\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      url: url,\r\n      endpointCodes,\r\n      acta: false,\r\n    };\r\n  },\r\n  async created() {\r\n    await this.obtenerCarritos();\r\n    await this.getIdentity();\r\n  },\r\n  computed: {\r\n    carrito() {\r\n      return this.$store.getters[\"carrito/getcar\"];\r\n    },\r\n    update() {\r\n      let data = this.$store.getters[\"carrito/getupd\"];\r\n\r\n      if (Array.isArray(data.items)) {\r\n        for (var i = 0; i < data.items.length; i++) {\r\n          if (data.items[i].cantidad != this.carrito.items[i].cantidad) {\r\n            this.upd = true;\r\n            break;\r\n          } else {\r\n            this.upd = false;\r\n          }\r\n        }\r\n      }\r\n      return data;\r\n    },\r\n    identity() {\r\n      return this.$store.getters[\"admin/getIdentity\"];\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions(\"carrito\", [\"getCart\"]),\r\n    ...mapActions(\"carrito\", [\"getCartCopy\"]),\r\n    close() {\r\n      this.$router.push(\"/\").catch((err) => {});\r\n      this.$emit(\"close\");\r\n    },\r\n    async obtenerCarritos() {\r\n      await this.getCart();\r\n      await this.getCartCopy();\r\n    },\r\n    getIdentity: async function () {\r\n      let response = await this.$store.dispatch(\"admin/getData\");\r\n      return response;\r\n    },\r\n\r\n    toCheckout: async function () {\r\n      //await this.obtenerCarritos();\r\n      let payload = {\r\n        carrito: this.carrito,\r\n      };\r\n      let result = await this.$store.dispatch(\"carrito/validateCrt\", {\r\n        option: \"valid_cart\",\r\n        item: payload,\r\n      });\r\n\r\n      if (result.status == \"error\") {\r\n        this.status = \"error\";\r\n        this.message = result.message; // result.message;\r\n        //this.delStatus();\r\n      } else {\r\n        // success\r\n        //si todo esta correcto redireccionar.\r\n        localStorage.getItem(\"lastv\");\r\n        localStorage.setItem(\"lastv\", \"car\");\r\n        return this.$router.push(\"/check-out\").catch((err) => {});\r\n      }\r\n    },\r\n\r\n    actualizarCarrito: async function (carrito, key) {\r\n      let payload = {\r\n        carrito,\r\n      };\r\n      let result = await this.$store.dispatch(\"carrito/editItemCrt\", {\r\n        option: \"upt_item\",\r\n        item: payload,\r\n      });\r\n\r\n      if (result.status == \"error\") {\r\n        this.status = \"error\";\r\n        this.message =\r\n          \"Ha ocurrido un error al intentar actualizar el carrito.\"; // result.message;\r\n      } else {\r\n        // success\r\n\r\n        await this.obtenerCarritos();\r\n        this.status = \"success\";\r\n        this.message = \"Carrito actualizado\";\r\n        this.acta = false;\r\n        if (this.update.items.length == 0) { \r\n          this.close();\r\n        }\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.eventBlock {\r\n  pointer-events: none;\r\n  opacity: 0.5;\r\n}\r\n.modalCar {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 2000;\r\n}\r\n.modalCar .modalc {\r\n  background: #ffffff;\r\n  height: 100vh;\r\n  width: 100%;\r\n}\r\n.modalCar .carr-b {\r\n  padding: 9.662vw 5.556vw 5.556vw;\r\n}\r\n.modalCar .tlc {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  border-bottom: 1px solid #d3d3d3;\r\n  padding-bottom: 6.039vw;\r\n  margin-bottom: 13.043vw;\r\n}\r\n.modalCar .tlc .title {\r\n  margin: 0;\r\n  font-weight: 700;\r\n  font-size: 4.831vw;\r\n  line-height: 111%;\r\n  color: var(--co-tlMCar);\r\n  font-family: var(--font-tlMCar);\r\n}\r\n.modalCar .tlc .cross {\r\n  width: 8.696vw;\r\n  height: 8.696vw;\r\n}\r\n.modalCar .tlc .title span {\r\n  margin-left: 5.072vw;\r\n  padding: 2.415vw 4.348vw;\r\n  background-color: var(--bk-cantMCar);\r\n  color: var(--co-cantMCar);\r\n  border-radius: 10vw;\r\n}\r\n.modalCar .prod-list.scroll {\r\n  overflow-y: scroll;\r\n}\r\n.modalCar .prod-list {\r\n  height: 89.13vw;\r\n  padding-bottom: 15.942vw;\r\n  border-bottom: 0.1vw solid gainsboro;\r\n  overflow-y: scroll;\r\n}\r\n.modalCar .proinfo .prod {\r\n  width: 20.773vw;\r\n  height: 20.773vw;\r\n}\r\n.modalCar .proinfo section {\r\n  width: 60.386vw;\r\n  padding-left: 4.106vw;\r\n}\r\n.modalCar .proinfo .tl {\r\n  font-weight: 700;\r\n  font-size: 5.556vw;\r\n  line-height: 111%;\r\n  color: var(--co-ptlMCar);\r\n  font-family: var(--font-ptlMCar);\r\n  margin: 0;\r\n}\r\n.modalCar .proinfo .sbtl {\r\n  margin: 0;\r\n  font-weight: 400;\r\n  font-size: 4.348vw;\r\n  line-height: 111%;\r\n  color: var(--co-stlMCar);\r\n}\r\n.modalCar .c-p-cont {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.modalCar .c-p-cont .counter {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.modalCar .c-p-cont .counter .btn {\r\n  font-size: 6.237vw;\r\n  line-height: 2.237vw;\r\n  font-weight: 700;\r\n  color: var(--co-btncMCar);\r\n  border: 0.242vw solid var(--co-btncMCar);\r\n  width: 6.237vw;\r\n  height: 6.237vw;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  border-radius: 8vw;\r\n  cursor: pointer;\r\n}\r\n.modalCar .c-p-cont .counter #text {\r\n  font-weight: 700;\r\n  font-size: 7.246vw;\r\n  width: 13.575vw;\r\n  height: 7.246vw;\r\n  border: 0;\r\n  text-align: center;\r\n  font-family: var(--font-ptlMCar);\r\n  color: var(--co-txtcMCar);\r\n  padding-left: 0;\r\n}\r\n.modalCar .c-p-cont hr {\r\n  border-width: 1vw;\r\n  width: 34.058vw;\r\n  border-color: gainsboro;\r\n  border-style: dotted;\r\n  border-bottom: 0;\r\n  border-left: 0;\r\n  border-right: 0;\r\n  margin: 0 3vw;\r\n}\r\n.modalCar .c-p-cont .price {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 20.053vw;\r\n  height: 9.565vw;\r\n  color: var(--co-priceMCar);\r\n  background-color: var(--bk-priceMCar);\r\n  font-weight: 700;\r\n  font-size: 4.348vw;\r\n  line-height: 111%;\r\n  border-radius: 20vw;\r\n}\r\n.modalCar .subt-c p {\r\n  padding: 3.14vw 0 5.314vw;\r\n  margin: 0;\r\n  font-weight: 700;\r\n  font-size: 4.831vw;\r\n  line-height: 111%;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  color: var(--co-sbtMCar);\r\n}\r\n.modalCar .subt-c span {\r\n  font-size: 7.246vw;\r\n  color: var(--co-sbtpMCar);\r\n}\r\n.modalCar .btn-fc {\r\n  width: 49.517vw;\r\n  height: 12.319vw;\r\n  background: var(--bk-fcMCar);\r\n  color: var(--co-fcMCar);\r\n  border-radius: 9.662vw;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-weight: 700;\r\n  font-size: 3.382vw;\r\n  line-height: 111%;\r\n  margin-left: auto;\r\n  cursor: pointer;\r\n}\r\n.modalCar .btn-fc.yll {\r\n  background: var(--bk-fcMCarYll);\r\n}\r\n.modalCar .product-c {\r\n  padding-bottom: 10.87vw;\r\n}\r\n@media (max-width: 769px) {\r\n  .modalCar .btn-fc.yll {\r\n    width: 35.024vw;\r\n  }\r\n}\r\n@media (min-width: 768px) {\r\n  .modalCar {\r\n    left: 0;\r\n    right: 0;\r\n    width: 100%;\r\n    height: 100vh;\r\n    background: rgba(150, 150, 150, 0.8);\r\n  }\r\n  .modalCar .modalc {\r\n    width: 28.646vw;\r\n    margin-left: auto;\r\n    position: relative;\r\n    right: -40vw;\r\n    transition: 0.75s;\r\n  }\r\n  .modalCar.transitionL .modalc {\r\n    right: 0;\r\n  }\r\n  .modalCar .carr-b {\r\n    padding: 3.125vw 1.563vw 1.927vw;\r\n  }\r\n  .modalCar .tlc {\r\n    padding-bottom: 1.25vw;\r\n    margin-bottom: 2.552vw;\r\n  }\r\n  .modalCar .tlc .title,\r\n  .modalCar .proinfo .tl,\r\n  .modalCar .subt-c p {\r\n    font-size: 1.042vw;\r\n  }\r\n  .modalCar .tlc .title span {\r\n    padding: 0.521vw 0.938vw;\r\n    margin-left: 1.094vw;\r\n  }\r\n  .modalCar .tlc .cross {\r\n    display: none;\r\n  }\r\n  .modalCar .proinfo .prod {\r\n    width: 4.479vw;\r\n    height: 4.479vw;\r\n  }\r\n  .modalCar .proinfo .sbtl {\r\n    font-size: 0.729vw;\r\n  }\r\n  .modalCar .proinfo section {\r\n    width: 15.521vw;\r\n    padding-left: 0.885vw;\r\n  }\r\n  .modalCar .c-p-cont .counter .btn {\r\n    width: 0.667vw;\r\n    height: 0.667vw;\r\n    font-size: 0.667vw;\r\n    line-height: 0.354vw;\r\n    border: 0.0242vw solid var(--co-btncMCar);\r\n  }\r\n  .modalCar .c-p-cont .counter #text {\r\n    font-size: 1.042vw;\r\n    height: 1.242vw;\r\n    width: 2.771vw;\r\n  }\r\n  .modalCar .c-p-cont hr {\r\n    border-width: 0.2vw;\r\n    width: 13.281vw;\r\n    margin: 0 1vw;\r\n  }\r\n  .modalCar .c-p-cont .price {\r\n    font-size: 0.938vw;\r\n    width: 4.324vw;\r\n    height: 2.061vw;\r\n  }\r\n  .modalCar .prod-list.scroll {\r\n    overflow-y: scroll;\r\n  }\r\n  .modalCar .prod-list {\r\n    height: 61.11111111111111vh;\r\n    padding-bottom: 0;\r\n    border-bottom: 0.1vw solid gainsboro;\r\n    /*overflow-y: scroll;*/\r\n  }\r\n  .modalCar .product-c {\r\n    padding-bottom: 3.021vw;\r\n    padding-left: 1vw;\r\n    padding-right: 1vw;\r\n    border-bottom: 0.1vw solid gainsboro;\r\n    margin-bottom: 3.021vw;\r\n  }\r\n  .modalCar .product-c:last-child {\r\n    margin-bottom: 0;\r\n    border-bottom: 0;\r\n  }\r\n  .modalCar .subt-c span {\r\n    font-size: 1.563vw;\r\n  }\r\n  .modalCar .subt-c p {\r\n    padding: 1.302vw 0 1.667vw;\r\n  }\r\n  .modalCar .btn-fc {\r\n    width: 12.188vw;\r\n    height: 2.656vw;\r\n    font-size: 0.729vw;\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}