{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport HeaderMenu from \"../../components/Navigator.vue\";\nimport Footer from \"../../components/Footer.vue\";\n//import RouteDir from \"../../components/fixedItems/RouteDir.vue\";\nexport default {\n  components: {\n    HeaderMenu,\n    Footer\n  },\n  data() {\n    return {\n      payment: \"\",\n      charge_pending: true,\n      error: false\n    };\n  },\n  async created() {\n    let voucher = localStorage.getItem(\"voucher\");\n    voucher = JSON.parse(voucher);\n    const id = voucher.receipt.body.id;\n    if (!id) {\n      this.$router.push(\"/\").catch(err => {});\n    } /* */\n\n    //enviar a validacion.\n    const response = await this.$store.dispatch(\"main/editItem\", {\n      option: \"charge_status\",\n      item: {\n        order_id: id\n      }\n    });\n    console.log(response);\n    this.payment = response.payment;\n    if (response.status == \"error\") {\n      this.charge_pending = true; //this.$router.push(\"/error\").catch(err => {});\n\n      this.error = true;\n    }\n    this.payment = response.payment;\n    //console.log(this.payment)\n\n    if (response.result.status == \"charge_pending\") {\n      this.charge_pending = true;\n    } else if (response.result.status != \"completed\") {\n      this.charge_pending = true; // this.$router.push(\"/error\").catch(err => {});\n    } else {\n      this.charge_pending = false;\n    }\n  },\n  watch: {\n    $route: {\n      immediate: true,\n      handler(to, from) {\n        let name = this.titulo;\n        document.title = to.meta.title || `Finalizado - Coyotas Lourdes`;\n      }\n    }\n  },\n  methods: {\n    validBilling(payment) {\n      if (!payment) {\n        return false;\n      }\n      if (payment.billing == \"error\" || payment.billing == \"No se encontraron coincidencias.\") {\n        return false;\n      }\n      if (payment?.billing?.reason_social) {\n        return false;\n      }\n      if (payment?.billing?.rfc) {\n        return false;\n      }\n      if (payment?.billing?.fiscal_address) {\n        return false;\n      }\n      if (payment?.billing?.postal_code) {\n        return false;\n      }\n      if (payment?.billing?.email) {\n        return false;\n      }\n      return true;\n    }\n  }\n};","map":{"version":3,"mappings":";AAiKA;AACA;AACA;AACA;EACAA;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;IACA;EACA;EACA;IACA;IACAC;IACA;IACA;MACA;IACA;;IAEA;IACA;MACAC;MACAC;QAAAC;MAAA;IACA;IACAC;IACA;IAEA;MACA;;MAEA;IACA;IAEA;IACA;;IAEA;MACA;IACA;MACA;IACA;MACA;IACA;EACA;EACAC;IACAC;MACAC;MACAC;QACA;QACAC;MACA;IACA;EACA;EACAC;IACAC;MACA;QACA;MACA;MACA,IACAd,8BACAA,uDACA;QACA;MACA;MAEA;QACA;MACA;MACA;QACA;MACA;MACA;QACA;MACA;MACA;QACA;MACA;MACA;QACA;MACA;MAEA;IACA;EACA;AACA","names":["components","HeaderMenu","Footer","data","payment","charge_pending","error","voucher","option","item","order_id","console","watch","$route","immediate","handler","document","methods","validBilling"],"sourceRoot":"src/views/carrito","sources":["Finished.vue"],"sourcesContent":["<template >\r\n  <div class=\"Finished\">\r\n    <HeaderMenu />\r\n    <div v-if=\"charge_pending == true\" class=\"finished-cont\">\r\n      <div v-if=\"!payment.status\">\r\n        <div v-if=\"error == false\" class=\"header\">\r\n          <p class=\"m1\">Cargando...</p>\r\n        </div>\r\n        <div v-else class=\"header\">\r\n          <p class=\"m1\">Error</p>\r\n          <p class=\"m2\">No se ha completado la transacción</p>\r\n        </div>\r\n      </div>\r\n      <div v-else-if=\"payment.status == 'CARGO PENDIENTE'\" class=\"header\">\r\n        <p class=\"m1\">Cargo pendiente</p>\r\n        <p class=\"m2\">Tu cargo esta en proceso de validación.</p>\r\n      </div>\r\n      <div v-else class=\"header\">\r\n        <p class=\"m1\">NO No se ha podido completar la transacción</p>\r\n        <p v-if=\"payment.status == 'FALLIDO'\" class=\"m2\">Cargo fallido</p>\r\n        <p v-if=\"payment.status == 'CANCELADO'\" class=\"m2\">Cargo cancelado</p>\r\n        <p v-if=\"payment.status == '3D SECURE EXPIRADO'\" class=\"m2\">\r\n          El proceso de validación ha expirado\r\n        </p>\r\n      </div>\r\n    </div>\r\n    <div v-else class=\"finished-cont\">\r\n      <div class=\"header\">\r\n        <p class=\"m1\">¡Gracias!</p>\r\n        <p class=\"m2\">Tu pedido ha sido recibido</p>\r\n      </div>\r\n      <section class=\"coluno\">\r\n        <div class=\"rowCont f1\">\r\n          <div class=\"colCont\">\r\n            <p class=\"titulo\">No. de pedido</p>\r\n            <p>{{ payment.pay_num }}</p>\r\n          </div>\r\n          <div class=\"colCont\">\r\n            <p class=\"titulo\">Fecha</p>\r\n            <p>{{ payment.created_at }}</p>\r\n            <!-- formatear a  octubre 21, 2021 -->\r\n          </div>\r\n          <div class=\"colCont\">\r\n            <p class=\"titulo\">Total</p>\r\n            <p>${{ payment.total }}</p>\r\n          </div>\r\n          <!---<div class=\"colCont\">\r\n            <p class=\"titulo\">Método de pago</p>\r\n            <p>{{ payment.method }}</p>\r\n          </div>-->\r\n        </div>\r\n        <div\r\n          class=\"rowCont f1 bill\"\r\n          v-if=\"payment.shipping_option !== 'Envío a domicilio.'\"\r\n        >\r\n          <p class=\"titulo_H\">Dirección de envío</p>\r\n          <div class=\"colCont\">\r\n            <p class=\"titulo\">Dirección</p>\r\n            <p>{{ payment.address }}</p>\r\n          </div>\r\n          <div class=\"colCont\">\r\n            <p class=\"titulo\">Ciudad</p>\r\n            <p>{{ payment.city }}</p>\r\n          </div>\r\n          <div class=\"colCont\">\r\n            <p class=\"titulo\">Estado</p>\r\n            <p>{{ payment.state }}</p>\r\n          </div>\r\n          <div class=\"colCont\">\r\n            <p class=\"titulo\">País</p>\r\n            <p>{{ payment.country }}</p>\r\n          </div>\r\n          <div class=\"colCont\">\r\n            <p class=\"titulo\">CP</p>\r\n            <p>{{ payment.postal_code }}</p>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      <div class=\"rowCont\">\r\n        <div class=\"tabla-pedido\">\r\n          <div class=\"header-tab\">Detalles del pedido</div>\r\n          <div class=\"t-p-cont\">\r\n            <div class=\"rowCont\">\r\n              <div class=\"colCont\">\r\n                <div class=\"row-t sbtwn tw1\">\r\n                  <p class=\"titulo-1\">Producto</p>\r\n                  <p class=\"titulo-1\">Precio</p>\r\n                </div>\r\n                <div\r\n                  v-for=\"(item, key) in payment.detail\"\r\n                  :key=\"key\"\r\n                  class=\"row-t sbtwn\"\r\n                >\r\n                  <div class=\"product-c\">\r\n                    <p>\r\n                      <b>{{ item.name }}</b>\r\n                    </p>\r\n                    <!-- <p>1 KG</p> -->\r\n                    <p>\r\n                      <span class=\"cant-p\">x{{ item.quantity }}</span>\r\n                    </p>\r\n                    <p>\r\n                      <span class=\"cant-extra\">{{ item.extra }}</span>\r\n                    </p>\r\n                  </div>\r\n                  <p class=\"second-c rt\">${{ item.subtotal }}</p>\r\n                </div>\r\n                <div class=\"row-t sbtwn pricing-it\">\r\n                  <p class=\"titulo-2\"><b>Subtotal</b></p>\r\n                  <p class=\"second-c rt\">${{ payment.subtotal }}</p>\r\n                </div>\r\n                <div class=\"row-t sbtwn pricing-it\">\r\n                  <p class=\"titulo-2 second-c\"><b>Envío</b></p>\r\n                  <p class=\"second-c rt\">{{ payment.envio }}</p>\r\n                </div>\r\n                <div class=\"row-t sbtwn pricing-it\">\r\n                  <p class=\"titulo-1 we-c\">Total</p>\r\n                  <p class=\"titulo-1 second-c totale\">${{ payment.total }}</p>\r\n                </div>\r\n              </div>\r\n              <div class=\"colCont dp1\">\r\n                <div class=\"row-t fdc\">\r\n                  <p class=\"titulo-2 we-c mb2\"><b>Método de pago</b></p>\r\n                  <p class=\"second-c\">{{ payment.method }}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"rowCont listRowCont\">\r\n              <!--v-if=\"validBilling(payment)\"--->\r\n              <div class=\"row-t\">\r\n                <p class=\"titulo-1 mb2\">Razón social</p>\r\n                <p>{{ payment.billing.reason_social }}</p>\r\n              </div>\r\n              <div class=\"row-t\">\r\n                <p class=\"titulo-1 mb2\">Rfc</p>\r\n                <p>{{ payment.billing.rfc }}</p>\r\n              </div>\r\n              <div class=\"row-t\">\r\n                <p class=\"titulo-1 mb2\">Dirección fiscal</p>\r\n                <p>{{ payment.billing.fiscal_address }}</p>\r\n              </div>\r\n              <div class=\"row-t\">\r\n                <p class=\"titulo-1 mb2\">Código postal</p>\r\n                <p>{{ payment.billing.postal_code }}</p>\r\n              </div>\r\n              <div class=\"row-t\">\r\n                <p class=\"titulo-1 mb2\">Correo electrónico</p>\r\n                <p>{{ payment.billing.email }}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <Footer />\r\n  </div>\r\n</template>\r\n<script>\r\nimport HeaderMenu from \"../../components/Navigator.vue\";\r\nimport Footer from \"../../components/Footer.vue\";\r\n//import RouteDir from \"../../components/fixedItems/RouteDir.vue\";\r\nexport default {\r\n  components: {\r\n    HeaderMenu,\r\n    Footer,\r\n  },\r\n  data() {\r\n    return {\r\n      payment: \"\",\r\n      charge_pending: true,\r\n      error: false,\r\n    };\r\n  },\r\n  async created() {\r\n    let voucher = localStorage.getItem(\"voucher\");\r\n    voucher = JSON.parse(voucher);\r\n    const id = voucher.receipt.body.id;\r\n    if (!id) {\r\n      this.$router.push(\"/\").catch((err) => {});\r\n    } /* */\r\n\r\n    //enviar a validacion.\r\n    const response = await this.$store.dispatch(\"main/editItem\", {\r\n      option: \"charge_status\",\r\n      item: { order_id: id },\r\n    });\r\n    console.log(response);\r\n    this.payment = response.payment;\r\n\r\n    if (response.status == \"error\") {\r\n      this.charge_pending = true; //this.$router.push(\"/error\").catch(err => {});\r\n\r\n      this.error = true;\r\n    }\r\n\r\n    this.payment = response.payment;\r\n    //console.log(this.payment)\r\n\r\n    if (response.result.status == \"charge_pending\") {\r\n      this.charge_pending = true;\r\n    } else if (response.result.status != \"completed\") {\r\n      this.charge_pending = true; // this.$router.push(\"/error\").catch(err => {});\r\n    } else {\r\n      this.charge_pending = false;\r\n    }\r\n  },\r\n  watch: {\r\n    $route: {\r\n      immediate: true,\r\n      handler(to, from) {\r\n        let name = this.titulo;\r\n        document.title = to.meta.title || `Finalizado - Coyotas Lourdes`;\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    validBilling(payment) {\r\n      if (!payment) {\r\n        return false;\r\n      }\r\n      if (\r\n        payment.billing == \"error\" ||\r\n        payment.billing == \"No se encontraron coincidencias.\"\r\n      ) {\r\n        return false;\r\n      }\r\n\r\n      if (payment?.billing?.reason_social) {\r\n        return false;\r\n      }\r\n      if (payment?.billing?.rfc) {\r\n        return false;\r\n      }\r\n      if (payment?.billing?.fiscal_address) {\r\n        return false;\r\n      }\r\n      if (payment?.billing?.postal_code) {\r\n        return false;\r\n      }\r\n      if (payment?.billing?.email) {\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\np {\r\n  margin: 0;\r\n}\r\n.finished-cont {\r\n  width: 88.906vw;\r\n  margin: 0 auto 17.396vw;\r\n  padding-top: 16.875vw;\r\n}\r\n.tabla-pedido {\r\n  width: 100%;\r\n  border: 1px solid gainsboro;\r\n}\r\n.header p {\r\n  text-align: center;\r\n}\r\n.header p.m1 {\r\n  font-family: var(--Inter);\r\n  font-weight: 700;\r\n  font-size: 2.083vw;\r\n  line-height: 2.5vw;\r\n  color: var(--co-fintlMyCar);\r\n}\r\n.header p.m2 {\r\n  font-family: var(--Inter);\r\n  font-weight: 700;\r\n  font-size: 2.083vw;\r\n  line-height: 2.5vw;\r\n  color: var(--co-fintlMyCar);\r\n}\r\n.rowCont {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.rowCont p {\r\n  font-style: normal;\r\n  font-weight: 400;\r\n  font-size: 1.25vw;\r\n  line-height: 1.771vw;\r\n  color: #8293a2;\r\n}\r\n.rowCont p.titulo_H {\r\n  font-family: var(--Inter);\r\n  font-style: normal;\r\n  font-weight: 700;\r\n  font-size: 0.833vw;\r\n  line-height: 0.99vw;\r\n  color: #8e8e8e;\r\n  text-align: left;\r\n  padding-bottom: 0.625vw;\r\n}\r\n.colCont p.titulo {\r\n  font-family: var(--Inter);\r\n  font-style: normal;\r\n  font-weight: 700;\r\n  font-size: 1.25vw;\r\n  line-height: 1.51vw;\r\n  text-align: center;\r\n  /*text-decoration-line: underline;*/\r\n  color: gray !important;\r\n}\r\n.f1 .colCont p {\r\n  font-weight: 700;\r\n  color: #bebebe;\r\n}\r\n.header-tab {\r\n  height: 4.677vw;\r\n  font-family: var(--Inter);\r\n  font-style: normal;\r\n  font-weight: 700;\r\n  font-size: 1.042vw;\r\n  line-height: 1.25vw;\r\n  text-align: center;\r\n  color: #8e8e8e;\r\n  background: white;\r\n  display: flex;\r\n  align-items: flex-end;\r\n  justify-content: flex-start;\r\n  padding-left: 4.375vw;\r\n}\r\n.row-t {\r\n  display: flex;\r\n}\r\n.row-t.sbtwn {\r\n  justify-content: space-between;\r\n}\r\n.colCont {\r\n  width: 100%;\r\n}\r\np.titulo-1 {\r\n  font-family: var(--Inter);\r\n  font-style: normal;\r\n  font-weight: 700;\r\n  font-size: 1.25vw;\r\n  line-height: 1.51vw;\r\n  color: gray;\r\n}\r\np.titulo-1:nth-child(2) {\r\n  text-align: right;\r\n}\r\n.listRowCont {\r\n  flex-direction: column;\r\n  margin-top: 4.323vw;\r\n  padding-top: 4.323vw;\r\n  border-top: 1px solid gainsboro;\r\n}\r\n.listRowCont .titulo-1 {\r\n  width: 8.844vw;\r\n}\r\n.f1 {\r\n  text-align: center;\r\n  margin: 0;\r\n}\r\n.mdl {\r\n  padding: 0 2.604vw;\r\n  margin: 0 2.604vw;\r\n  border-left: 1px solid gainsboro;\r\n  border-right: 1px solid gainsboro;\r\n}\r\n.tabla-pedido .rowCont p {\r\n  font-size: 0.781vw;\r\n  line-height: 1.094vw;\r\n}\r\n.tabla-pedido .rowCont .cant-extra {\r\n  font-size: 0.581vw;\r\n  line-height: 1.094vw;\r\n}\r\n.t-p-cont {\r\n  padding: 1.302vw 4.375vw 3.854vw;\r\n}\r\n.t-p-cont .colCont:first-of-type {\r\n  padding-right: 7.344vw;\r\n  margin-right: 3.073vw;\r\n  border-right: 0.01vw solid silver;\r\n}\r\n.orange {\r\n  color: #fe9128 !important;\r\n}\r\n.we-c {\r\n  width: 10vw;\r\n}\r\n.second-c {\r\n  width: 7.448vw;\r\n}\r\n.tw1 {\r\n  margin-bottom: 0.729vw;\r\n}\r\n.dp1 {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  height: 13.344vw;\r\n}\r\n.listRowCont .row-t {\r\n  margin-bottom: 0;\r\n}\r\n.cant-p {\r\n  margin-top: 1.042vw !important;\r\n}\r\n.totale {\r\n  font-size: 1.042vw !important;\r\n}\r\n.f1 .colCont {\r\n  display: flex;\r\n}\r\n@media (max-width: 768px) {\r\n  .tw1 {\r\n    margin-bottom: 0.729vw;\r\n    font-size: 4.673vw;\r\n  }\r\n  .finished-cont {\r\n    width: 82.009vw;\r\n    /*margin: 14.252vw auto 20.093vw;*/\r\n    margin: 0 auto 20.093vw;\r\n    padding-top: 38.164vw;\r\n  }\r\n  .header p.m1 {\r\n    font-size: 9.662vw;\r\n    line-height: 11.594vw;\r\n    text-align: left;\r\n  }\r\n  .header p.m2 {\r\n    font-size: 9.662vw;\r\n    line-height: 11.594vw;\r\n    width: auto;\r\n    text-align: left;\r\n    margin: auto;\r\n  }\r\n  .rowCont {\r\n    flex-direction: column;\r\n  }\r\n  .f1 {\r\n    flex-direction: column;\r\n    margin: 14.252vw 0 7.944vw;\r\n  }\r\n  .f1 .colCont {\r\n    margin-bottom: 0;\r\n  }\r\n  .colCont p.titulo {\r\n    font-size: 4.831vw;\r\n    line-height: 5.607vw;\r\n    margin-bottom: 4.206vw;\r\n    text-align: left;\r\n  }\r\n  .rowCont p {\r\n    font-size: 4.831vw;\r\n    line-height: 4.944vw;\r\n    width: 100%;\r\n    text-align: left;\r\n  }\r\n  .header-tab {\r\n    font-size: 4.831vw;\r\n    line-height: 5.797vw;\r\n    padding: 9.903vw 6vw 0;\r\n    height: auto;\r\n    justify-content: center;\r\n  }\r\n  .mdl {\r\n    padding: 7.477vw 0 0;\r\n    margin: 7.477vw 0 0;\r\n    border-top: 1px solid gainsboro;\r\n    border-left: none;\r\n    border-right: none;\r\n  }\r\n  .t-p-cont {\r\n    padding: 5.841vw;\r\n  }\r\n  .tabla-pedido .rowCont p,\r\n  .tabla-pedido .rowCont .cant-extra {\r\n    font-size: 3.505vw;\r\n    line-height: 4.907vw;\r\n  }\r\n  .dp1 {\r\n    margin-top: 6.763vw;\r\n    padding-top: 6.542vw;\r\n    border-top: 1px solid gainsboro;\r\n    height: auto;\r\n  }\r\n  .second-c {\r\n    width: 33vw;\r\n  }\r\n  .we-c {\r\n    width: 24vw;\r\n  }\r\n  .totale {\r\n    font-size: 5.607vw !important;\r\n  }\r\n  .listRowCont .titulo-1 {\r\n    width: auto;\r\n  }\r\n  .listRowCont .row-t {\r\n    margin-bottom: 2.804vw;\r\n    flex-direction: column;\r\n  }\r\n  .listRowCont {\r\n    margin-top: 9.179vw;\r\n    padding-top: 9.179vw;\r\n  }\r\n  .row-t.sbtwn {\r\n    margin-bottom: 3.738vw;\r\n  }\r\n  .row-t.sbtwn p:nth-child(2) {\r\n    text-align: right;\r\n  }\r\n  .row-t.sbtwn .product-c p:nth-child(2) {\r\n    text-align: left;\r\n  }\r\n  .finished-cont .header {\r\n    padding-bottom: 7.971vw;\r\n    border-bottom: 0.01vw solid gray;\r\n  }\r\n  p.titulo-2 b {\r\n    font-weight: 500 !important;\r\n  }\r\n  .rowCont p.titulo_H {\r\n    font-size: 5.433vw;\r\n    line-height: 7.99vw;\r\n    padding-bottom: 2.415vw;\r\n    width: 100%;\r\n  }\r\n  .t-p-cont .colCont:first-of-type {\r\n    border-right: 0;\r\n  }\r\n  .tabla-pedido .rowCont .pricing-it p {\r\n    font-size: 5.607vw;\r\n    line-height: 5.707vw;\r\n  }\r\n  .row-t.sbtwn.pricing-it {\r\n    margin-bottom: 1.208vw;\r\n  }\r\n  .dp1 p.titulo-2 b {\r\n    font-weight: 700 !important;\r\n  }\r\n  .product-c {\r\n    width: 100%;\r\n  }\r\n  .mb2 {\r\n    margin-bottom: 2vw !important;\r\n  }\r\n}\r\n@media (min-width: 768px) {\r\n  .finished-cont {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n  }\r\n  .finished-cont .header {\r\n    display: flex;\r\n    justify-content: center;\r\n    padding-bottom: 1.823vw;\r\n    margin-bottom: 5.573vw;\r\n    border-bottom: 0.1vw solid gray;\r\n    width: 100%;\r\n  }\r\n  .finished-cont .fcb {\r\n    display: flex;\r\n  }\r\n  .rowCont.f1 {\r\n    flex-direction: column;\r\n    justify-content: flex-start;\r\n    padding-top: 2.083vw;\r\n    padding-left: 7.813vw;\r\n    padding-right: 7.24vw;\r\n    padding-bottom: 3.438vw;\r\n    width: 14.792vw;\r\n  }\r\n  .f1 .colCont p {\r\n    width: 7.552vw;\r\n    text-align: left;\r\n    font-size: 0.833vw;\r\n  }\r\n  .header p.m1 {\r\n    margin-right: 0.4vw;\r\n  }\r\n  .product-c {\r\n    width: 50%;\r\n  }\r\n  .second-c.rt {\r\n    text-align: right;\r\n  }\r\n  .row-t {\r\n    padding-bottom: 0.469vw;\r\n  }\r\n  .t-p-cont .colCont:first-of-type {\r\n    width: 13.958vw;\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}