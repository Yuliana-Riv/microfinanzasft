{"ast":null,"code":"'use strict';\n\nimport api from '@/api/api';\nconst _tkn = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.MTY1NTkyMzY1Mw.zG6jshf09VgcuRpT3dTtlgvNDH6inT9Y_g4sYf2lik8';\nconst SET_CTK = 'SET_CTK',\n  SET_CAR = 'SET_CAR',\n  SET_UPD = 'SET_UPD';\nexport default {\n  namespaced: true,\n  state: {\n    _ctk: '',\n    car: '',\n    upd: ''\n  },\n  getters: {\n    getcar(state) {\n      return state.car;\n    },\n    getupd(state) {\n      return state.upd;\n    },\n    gettkn(state) {\n      return state._ctk;\n    }\n  },\n  mutations: {\n    [SET_CAR](state, change) {\n      state.car = change;\n    },\n    [SET_CTK](state, change) {\n      state._ctk = change;\n    },\n    [SET_UPD](state, change) {\n      state.upd = change;\n    }\n  },\n  actions: {\n    //Asignar el objeto de carrito \n    setCarrito({\n      commit\n    }, payload) {\n      commit(SET_CAR, payload);\n    },\n    setToken({\n      commit\n    }, payload) {\n      commit(SET_CTK, payload);\n    },\n    async setCart({\n      commit\n    }, payload) {\n      try {\n        let token = _tkn;\n        let response = await api.addItem(payload, token);\n        if (response.data.status == 'success') {\n          commit(SET_CAR, response.data.dec);\n          commit(SET_CTK, response.data.result);\n          localStorage.setItem('_ctk', response.data.result);\n        } else {\n          //todo: VALIDAR -> error\n          commit(SET_CAR, '');\n          commit(SET_CTK, '');\n        }\n        return response.data;\n      } catch (error) {\n        //console.log(error)\n        return {\n          status: 'error',\n          message: 'Ha ocurrido un error al intentar eliminar la información.',\n          result: ''\n        };\n      }\n    },\n    async getCart({\n      commit\n    }) {\n      try {\n        let token = _tkn;\n        let _ctk = localStorage.getItem('_ctk');\n        let payload = {\n          option: 'get_cart',\n          item: {\n            _ctk: _ctk\n          }\n        };\n        let response = await api.addItem(payload, token);\n        if (response.data.status == 'success') {\n          commit(SET_CAR, response.data.result);\n          commit(SET_CTK, _ctk);\n        } else {\n          //todo: VALIDAR -> error\n          commit(SET_CAR, '');\n          commit(SET_CTK, '');\n        }\n        return response.data;\n      } catch (error) {\n        //console.log(error)\n        return {\n          status: 'error',\n          message: 'Ha ocurrido un error al intentar eliminar la información.',\n          result: ''\n        };\n      }\n    },\n    //Mantener una copia en computed.\n    async getCartCopy({\n      commit\n    }) {\n      try {\n        let token = _tkn;\n        let _ctk = localStorage.getItem('_ctk');\n        let payload = {\n          option: 'get_cart',\n          item: {\n            _ctk: _ctk\n          }\n        };\n        let response = await api.addItem(payload, token);\n        if (response.data.status == 'success') {\n          commit(SET_UPD, response.data.result);\n        }\n        return response.data;\n      } catch (error) {\n        //console.log(error)\n        return {\n          status: 'error',\n          message: 'Ha ocurrido un error al intentar eliminar la información.',\n          result: ''\n        };\n      }\n    },\n    async deleteItemCrt({\n      commit\n    }, payload) {\n      try {\n        let token = _tkn;\n        let response = await api.deleteItemCar(payload, token);\n        if (response.data.status == 'success') {\n          commit(SET_CTK, response.data.result);\n          localStorage.setItem('_ctk', response.data.result);\n        }\n        console.log(response.data);\n        return response.data;\n      } catch (error) {\n        console.log(error);\n        return {\n          status: 'error',\n          message: 'Ha ocurrido un error al intentar eliminar la información.',\n          result: ''\n        };\n      }\n    },\n    async editItemCrt({\n      commit\n    }, payload) {\n      try {\n        let token = _tkn;\n        let response = await api.editItem(payload, token);\n        if (response.data.status == 'success') {\n          commit(SET_CTK, response.data.result);\n          localStorage.setItem('_ctk', response.data.result);\n        }\n        console.log(response.data);\n        return response.data;\n      } catch (error) {\n        //console.log(error)\n        return {\n          status: 'error',\n          message: 'Ha ocurrido un error al intentar editar la información.',\n          result: ''\n        };\n      }\n    },\n    async addItemCrt({\n      commit\n    }, payload) {\n      try {\n        let token = _tkn;\n        let response = await api.addItem(payload, token);\n        if (response.data.status == 'success') {\n          commit(SET_CTK, response.data.result);\n          localStorage.setItem('_ctk', response.data.result);\n        }\n        return response.data;\n      } catch (error) {\n        //console.log(error)\n        return {\n          status: 'error',\n          message: 'Ha ocurrido un error al intentar guardar la información.',\n          result: ''\n        };\n      }\n    },\n    async validateCrt({\n      commit\n    }, payload) {\n      try {\n        let token = _tkn;\n        let response = await api.addItem(payload, token);\n        return response.data;\n      } catch (error) {\n        //console.log(error)\n        return {\n          status: 'error',\n          message: 'Ha ocurrido un error al intentar guardar la información.',\n          result: ''\n        };\n      }\n    }\n  }\n};","map":{"version":3,"names":["api","_tkn","SET_CTK","SET_CAR","SET_UPD","namespaced","state","_ctk","car","upd","getters","getcar","getupd","gettkn","mutations","change","actions","setCarrito","commit","payload","setToken","setCart","token","response","addItem","data","status","dec","result","localStorage","setItem","error","message","getCart","getItem","option","item","getCartCopy","deleteItemCrt","deleteItemCar","console","log","editItemCrt","editItem","addItemCrt","validateCrt"],"sources":["C:/Users/Dell Latitude/Documents/GitHub/microfinanzas_ft/src/store/modules/carrito.js"],"sourcesContent":["\r\n'use strict'\r\n\r\nimport api from '@/api/api'; \r\nconst _tkn = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.MTY1NTkyMzY1Mw.zG6jshf09VgcuRpT3dTtlgvNDH6inT9Y_g4sYf2lik8'\r\n\r\nconst \r\n\r\n      SET_CTK = 'SET_CTK',\r\n      SET_CAR = 'SET_CAR',\r\n      SET_UPD = 'SET_UPD';\r\n      \r\n\r\nexport default {\r\n    namespaced: true,\r\n    state:{\r\n        _ctk:'',\r\n        car:'',\r\n        upd:'',\r\n    },\r\n    getters: {\r\n        \r\n        getcar(state) {\r\n            return state.car;\r\n        },\r\n        getupd(state) {\r\n            return state.upd;\r\n        },\r\n        gettkn(state) {\r\n            return state._ctk;\r\n        }\r\n     \r\n    },\r\n    mutations: {\r\n      \r\n   \r\n        [SET_CAR](state, change){\r\n            state.car = change;\r\n        },\r\n        [SET_CTK](state, change){\r\n            state._ctk = change;\r\n        },\r\n        [SET_UPD](state, change){\r\n            state.upd = change;\r\n        },\r\n  \r\n       \r\n    },\r\n    actions:{\r\n        //Asignar el objeto de carrito \r\n        setCarrito({commit}, payload){\r\n            commit(SET_CAR, payload);  \r\n        },\r\n\r\n        setToken({commit}, payload){\r\n            commit(SET_CTK, payload);  \r\n        },\r\n\r\n        async setCart({ commit } , payload) {\r\n\r\n\r\n            try {               \r\n                let token = _tkn \r\n                let response = await api.addItem(payload, token);\r\n            \r\n               \r\n                if(response.data.status =='success'){\r\n                    commit(SET_CAR, response.data.dec);  \r\n                    commit(SET_CTK, response.data.result);  \r\n                    localStorage.setItem('_ctk', response.data.result)\r\n                }else{  //todo: VALIDAR -> error\r\n                    commit(SET_CAR, '');  \r\n                    commit(SET_CTK, '');  \r\n                }\r\n\r\n                return response.data;\r\n            } catch (error) {\r\n               //console.log(error)\r\n               return {\r\n                status:'error',\r\n                message:'Ha ocurrido un error al intentar eliminar la información.',\r\n                result:''\r\n              }\r\n            }\r\n           \r\n        },\r\n        \r\n        async getCart({ commit }) {\r\n\r\n\r\n            try {               \r\n                let token = _tkn \r\n\r\n                let _ctk =localStorage.getItem('_ctk')\r\n                let payload={\r\n                    option:'get_cart',\r\n                  item:{  _ctk :  _ctk}\r\n                }\r\n\r\n                let response = await api.addItem(payload, token);\r\n              \r\n\r\n                if(response.data.status =='success'){\r\n                    commit(SET_CAR, response.data.result);  \r\n                    commit(SET_CTK, _ctk);  \r\n                }else{  //todo: VALIDAR -> error\r\n                    commit(SET_CAR, '');  \r\n                    commit(SET_CTK, '');  \r\n                }\r\n\r\n                return response.data;\r\n            } catch (error) {\r\n               //console.log(error)\r\n               return {\r\n                status:'error',\r\n                message:'Ha ocurrido un error al intentar eliminar la información.',\r\n                result:''\r\n              }\r\n            }\r\n           \r\n        },\r\n        //Mantener una copia en computed.\r\n        async getCartCopy({ commit }) {\r\n\r\n\r\n            try {               \r\n                let token = _tkn \r\n\r\n                let _ctk =localStorage.getItem('_ctk')\r\n                let payload={\r\n                    option:'get_cart',\r\n                  item:{  _ctk :  _ctk}\r\n                }\r\n\r\n                let response = await api.addItem(payload, token);\r\n              \r\n\r\n                if(response.data.status =='success'){\r\n                    commit(SET_UPD, response.data.result);  \r\n             \r\n                }\r\n\r\n                return response.data;\r\n            } catch (error) {\r\n               //console.log(error)\r\n               return {\r\n                status:'error',\r\n                message:'Ha ocurrido un error al intentar eliminar la información.',\r\n                result:''\r\n              }\r\n            }\r\n           \r\n        },\r\n\r\n        async deleteItemCrt({ commit }, payload) { \r\n           \r\n            try {               \r\n                let token = _tkn \r\n                let response = await api.deleteItemCar(payload, token);\r\n                if(response.data.status =='success'){\r\n                    commit(SET_CTK, response.data.result);  \r\n                    localStorage.setItem('_ctk', response.data.result)\r\n                }\r\n\r\n                console.log(response.data)\r\n                return response.data;\r\n            } catch (error) {\r\n               console.log(error)\r\n               return {\r\n                status:'error',\r\n                message:'Ha ocurrido un error al intentar eliminar la información.',\r\n                result:''\r\n              }\r\n            }\r\n        },\r\n\r\n        \r\n        async editItemCrt({ commit }, payload) { \r\n           \r\n            try {               \r\n                let token = _tkn \r\n                let response = await api.editItem(payload, token);\r\n                if(response.data.status =='success'){\r\n                    commit(SET_CTK, response.data.result);  \r\n                    localStorage.setItem('_ctk', response.data.result)\r\n                }\r\n                console.log(response.data)\r\n                return response.data;\r\n            } catch (error) {\r\n               //console.log(error)\r\n               return {\r\n                status:'error',\r\n                message:'Ha ocurrido un error al intentar editar la información.',\r\n                result:''\r\n              }\r\n            }\r\n           \r\n        },\r\n\r\n        async addItemCrt({ commit }, payload) { \r\n         \r\n            \r\n            try {               \r\n                let token = _tkn \r\n                let response = await api.addItem(payload, token);\r\n                if(response.data.status =='success'){\r\n                    commit(SET_CTK, response.data.result);  \r\n                    localStorage.setItem('_ctk', response.data.result)\r\n                }\r\n                return response.data;\r\n            } catch (error) {\r\n               //console.log(error)\r\n               return {\r\n                status:'error',\r\n                message:'Ha ocurrido un error al intentar guardar la información.',\r\n                result:''\r\n              }\r\n            }\r\n           \r\n        },\r\n\r\n        async validateCrt({ commit }, payload) { \r\n         \r\n            \r\n            try {               \r\n                let token = _tkn \r\n                let response = await api.addItem(payload, token);\r\n                return response.data;\r\n            } catch (error) {\r\n               //console.log(error)\r\n               return {\r\n                status:'error',\r\n                message:'Ha ocurrido un error al intentar guardar la información.',\r\n                result:''\r\n              }\r\n            }\r\n           \r\n        },\r\n\r\n\r\n      \r\n\r\n       \r\n   \r\n    },\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}