{"ast":null,"code":"import { mapActions } from 'vuex';\nimport AddGlp from './addGlp.vue';\nimport EditGlp from './editGlp.vue';\nexport default {\n  name: 'global_params',\n  components: {\n    AddGlp,\n    EditGlp\n  },\n  data() {\n    return {\n      status: '',\n      message: '',\n      item: '',\n      search_value: '',\n      updsearchcli: '',\n      currentPage: 1,\n      itemsPerPage: 12,\n      viewModal: false,\n      itemDel: '',\n      radius: false,\n      active: false\n    };\n  },\n  created() {\n    this.getAllInfoGlp('global_params');\n  },\n  computed: {\n    data() {\n      let arr = this.$store.getters[\"global_params/data\"];\n      console.log(arr);\n      let filter = [];\n      if (!Array.isArray(arr)) {\n        return [];\n      } else {\n        /* if(this.search_value !=''){\r\n           for (const item of arr) {\r\n               if(this.includesItem(this.search_value, item.name)){\r\n                 filter.push(item)\r\n               }\r\n           }\r\n         }else{\r\n           filter = arr\r\n         } */\n\n        filter = arr;\n      }\n      return filter;\n    },\n    historyOption() {\n      return this.$store.getters[\"global_params/getHistoryOption\"];\n    },\n    //Paginacion\n    allItems() {\n      return Object.keys(this.data).map(pid => this.data[pid]);\n    },\n    filteredItems() {\n      return this.allItems.slice((this.currentPage - 1) * this.itemsPerPage, this.currentPage * this.itemsPerPage);\n    },\n    totalPages() {\n      let total = Math.ceil(this.allItems.length / this.itemsPerPage);\n      if (total < this.currentPage) {\n        this.currentPage = 1;\n      }\n      return total;\n    }\n  },\n  methods: {\n    ...mapActions('global_params', ['getAllInfoGlp']),\n    ...mapActions('global_params', ['setHistoryOptionGlp']),\n    ...mapActions('global_params', ['setAddedGlp']),\n    includesItem(search, name) {\n      if (search == \"\") {\n        return true;\n      }\n      name = name.toLowerCase();\n      search = search.toLowerCase();\n      if (search == \"\") {\n        return false;\n      }\n      return name.includes(search);\n    },\n    changeView(option, item) {\n      this.item = item;\n      this.setAddedGlp(item);\n      this.setHistoryOptionGlp(option);\n    },\n    activeRadius() {\n      this.radius ? this.radius = false : this.radius = true;\n    },\n    showModal: function (id) {\n      this.itemDel = id;\n      this.viewModal = true;\n    },\n    closeModal: function () {\n      this.viewModal = false;\n      this.itemDel = '';\n    },\n    wait: function () {\n      setTimeout(() => this.$router.go(), 200);\n    },\n    delStatus: function () {\n      setTimeout(() => this.delMsgs(), 2000);\n      setTimeout(() => this.wait(), 500);\n    },\n    delMsgs: function () {\n      this.status = \"\";\n      this.message = \"\";\n    },\n    eliminar: async function () {\n      let id = this.itemDel;\n      this.status = '';\n      this.message = '';\n      let result = await this.$store.dispatch(\"global_params/deleteItemGlp\", {\n        option: 'global_params',\n        id: id\n      });\n      if (result.status == 'error') {\n        this.message = result.message;\n        this.status = 'error';\n        this.delStatus();\n      } else {\n        this.status = '';\n        this.message = '';\n        this.wait();\n      }\n    },\n    // botones de paginacion.\n    next() {\n      if (this.currentPage < this.totalPages) {\n        this.currentPage++;\n      }\n    },\n    prev() {\n      if (this.currentPage > 1) {\n        this.currentPage--;\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"AA+KA;AACA;AACA;AACA;EACAA;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MAEAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EAIAC;IACAb;MAEA;MACAc;MACA;MACA;QACA;MACA;QACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;QAEAC;MACA;MAEA;IAGA;IACAC;MACA;IACA;IAGA;IACAC;MACA;IACA;IACAC;MAEA;IACA;IACAC;MACA;MACA;QACA;MACA;MACA;IACA;EACA;EACAC;IAEA;IACA;IACA;IAGAC;MACA;QACA;MACA;MACAzB;MACA0B;MACA;QACA;MACA;MACA;IACA;IAGAC;MACA;MACA;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IAEAC;MACAC;IACA;IAEAC;MACAD,iCACA;MACAA,8BACA;IAEA;IACAE;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;MAEA;QAAAC;QAAAC;MAAA;MAEA;QACA;QACA;QACA;MAEA;QACA;QACA;QACA;MACA;IACA;IAOA;IACAC;MAEA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;IACA;EAGA;AACA","names":["name","components","AddGlp","EditGlp","data","status","message","item","search_value","updsearchcli","currentPage","itemsPerPage","viewModal","itemDel","radius","active","created","computed","console","filter","historyOption","allItems","filteredItems","totalPages","methods","includesItem","search","changeView","activeRadius","showModal","closeModal","wait","setTimeout","delStatus","delMsgs","eliminar","option","id","next","prev"],"sourceRoot":"src/views/global_params","sources":["globalparams.vue"],"sourcesContent":["<template>\r\n    <div id=\"global_params\">\r\n         \r\n             <div v-if=\"historyOption =='Default'\">\r\n                    <!--   <div class=\"dflx\">\r\n                        <p class=\"noitems\">No. de items <span v-if=\"data.length>0\">{{data.length}}</span> <span v-else>0</span> </p>\r\n\r\n                       \r\n                                 <div class=\"select-container\">\r\n          <input type=\"checkbox\" name=\"select-ch\" id=\"select-ch\" v-model=\"active\" true-value=\"true\" false-value=\"false\"/>\r\n          <label for=\"select-ch\">\r\n            <div id=\"select-items\" :class=\"{'rounded' : active}\">\r\n                Items por página: {{itemsPerPage}}\r\n            </div>\r\n          </label>\r\n          <div class=\"options-cont\" @click=\"closeSelect()\">\r\n            <div\r\n              class=\"option-btn\"\r\n              v-bind:value=\"6\"\r\n              @click=\"itemsPerPage = '6'\"\r\n            >\r\n              6\r\n            </div>\r\n            <div\r\n              class=\"option-btn\"\r\n              v-bind:value=\"12\"\r\n              @click=\"itemsPerPage = '12'\"\r\n            >\r\n              12\r\n            </div>\r\n            <div\r\n              class=\"option-btn\"\r\n              v-bind:value=\"18\"\r\n              @click=\"itemsPerPage = '18'\"\r\n            >\r\n              18\r\n            </div>\r\n            <div\r\n              class=\"option-btn\"\r\n              v-bind:value=\"24\"\r\n              @click=\"itemsPerPage = '24'\"\r\n            >\r\n              24\r\n            </div>\r\n          </div>\r\n        </div> \r\n                       <div class=\"buscador dflx\">\r\n                              <input v-model=\"search_value\" type=\"search\" id=\"input-search\" class=\"form-control\" :placeholder=\"'Búsqueda'\"  />\r\n                              <div class=\"icon_buscar\">\r\n                              <img  src=\"../../assets/Search.png\" alt=\"icono buscar\">\r\n                              </div>\r\n\r\n                        </div>  \r\n\r\n\r\n\r\n\r\n\r\n                   </div> -->\r\n\r\n                    <p class=\"msg_text\">Costo del envío local y cantidad a partir de la cual el envío es gratis.</p>\r\n\r\n                     <div v-if=\"data.length<3\"  @click=\"changeView('Add','')\"  class=\"btn_añadir dflx\">\r\n                                <p  > AGREGAR</p>  <img src=\"../../assets/add.png\" alt=\"\">\r\n                     </div>\r\n\r\n\r\n                       <div class=\"tbl_sub\">\r\n            <div class=\"tbl_header dflx\">\r\n                <div class=\"tblh tblrad\">\r\n                    <p>TÍPO DE ENVÍO</p>\r\n                </div>\r\n                 <div class=\"tblh \">\r\n                    <p>COSTO ENVIO</p>\r\n                </div>\r\n                 <div class=\"tblh \">\r\n                    <p>ENVÍO GRATIS</p>\r\n                </div>\r\n                 <div class=\"tblh \">\r\n                    <p>TEXTO</p>\r\n                </div>\r\n                \r\n                \r\n                <div class=\"tblh2 \">\r\n                   \r\n                    <p>EDITAR</p>\r\n                </div>\r\n                 <div class=\"tblh2  tblh2r \">\r\n                   \r\n                    <p>BORRAR</p>\r\n                </div>\r\n                 \r\n                 \r\n            </div>\r\n            <div tbl_content>\r\n                <div  v-if=\"data.length>0\">\r\n                    <div class=\"tbl_items dflx\" v-for=\"(item, key) in filteredItems\" :key=\"key\">\r\n                        <div class=\"tbl_item \">\r\n                            <p>{{item.send_type\t}}</p>\r\n                        </div>\r\n                        <div class=\"tbl_item \">\r\n                            <p>{{item.shipping_price}}</p>\r\n                        </div>\r\n                          <div class=\"tbl_item \">\r\n                            <p>{{item.free_shipping}}</p>\r\n                        </div>\r\n                          <div class=\"tbl_item \">\r\n                            <p>{{item.texto}}</p>\r\n                        </div>\r\n                    \r\n                       \r\n                            <div class=\"icon_editar\">\r\n                                <img   @click=\"changeView('Edit',item)\" src=\"../../assets/i_editar.png\" alt=\"icono editar\"   >\r\n                            </div>\r\n                            <div class=\"icon_eliminar\">\r\n                                <img  @click=\"showModal(item.id)\" src=\"../../assets/i_eliminar.png\" alt=\"icono eliminar\" >\r\n                            </div>\r\n                        \r\n                    </div>\r\n                </div>  \r\n                <div v-else>\r\n                    <p class=\"snu\">Aun no hay registros.</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n          <div  id=\"navigate-buttons\" class=\"mlf2\">\r\n                    <div class=\"dflx\">\r\n                        <button @click=\"prev\" id=\"btn-prev\" class=\"btn-navigate  \"><img src=\"../../assets/Left.png\" alt=\"icono anterior\"></button>\r\n                        <p class=\"num-pages\">{{currentPage}} / {{totalPages}}</p>\r\n                        <button @click=\"next\"  id=\"btn-next\" class=\"btn-navigate  \"><img src=\"../../assets/Right.png\" alt=\"icono siguiente\"></button>\r\n                     </div>\r\n        </div>\r\n\r\n\r\n\r\n             </div>\r\n             <div v-if=\"historyOption =='Add'\">\r\n                 <!-- Agregar global_params -->\r\n                 <AddGlp/>\r\n             </div>\r\n             <div v-if=\"historyOption =='Edit'\">\r\n               <!-- Editar global_params -->\r\n               <EditGlp/>\r\n             </div>\r\n         \r\n\r\n\r\n             <div v-if=\"status !=''\" class=\"status_messages\">\r\n                            <div v-if=\"status =='success'\" class=\"msg msg_success\">\r\n                                 <p>{{message}}</p>\r\n                            </div>\r\n                            <div  v-if=\"status =='error'\" class=\"msg msg_error\">\r\n                                <p>{{message}}</p>\r\n                            </div>\r\n        </div>\r\n\r\n         \r\n           <div v-if=\"viewModal\" class=\"modal_view\">\r\n           \r\n            <div id=\"modal_delete\">\r\n                <div class=\"body\">\r\n                     <img src=\"../../assets/alert.png\" alt=\"icono alerta\">\r\n            <h3 >¿Estás seguro de  <span>eliminar <br> esta etiqueta?</span></h3>\r\n                </div>\r\n           \r\n            <div class=\"modal_del_btns dflx\">\r\n                <p @click=\"eliminar()\">Aceptar</p>   <p  @click=\"closeModal()\" >Cancelar</p>\r\n            </div>\r\n          </div>\r\n        </div> \r\n      \r\n    </div>\r\n</template>\r\n<script>\r\nimport {mapActions} from 'vuex';\r\nimport AddGlp from './addGlp.vue'\r\nimport EditGlp from './editGlp.vue'\r\nexport default {\r\n  name: 'global_params',\r\n  components:{\r\n   AddGlp,\r\n   EditGlp\r\n  },\r\n    data(){\r\n       return{\r\n        \r\n           status:'',\r\n           message:'',\r\n           item: '',\r\n           search_value:'',\r\n           updsearchcli:'',\r\n           currentPage: 1,\r\n           itemsPerPage:   12,\r\n\r\n             viewModal:false,\r\n           itemDel:'',\r\n           radius:false,\r\n            active :false,\r\n       }\r\n   },\r\n  created() {\r\n     this.getAllInfoGlp('global_params')\r\n  },\r\n  \r\n\r\n   \r\n  computed:{\r\n         data() {\r\n             \r\n              let arr = this.$store.getters[\"global_params/data\"];\r\n              console.log(arr)\r\n                      let filter =[]\r\n              if(!Array.isArray(arr)){\r\n                return []\r\n              }else{\r\n                 /* if(this.search_value !=''){\r\n                    for (const item of arr) {\r\n                        if(this.includesItem(this.search_value, item.name)){\r\n                          filter.push(item)\r\n                        }\r\n                    }\r\n                  }else{\r\n                    filter = arr\r\n                  } */\r\n\r\n                  filter = arr\r\n              }\r\n              \r\n                return filter\r\n\r\n\r\n        },\r\n         historyOption(){\r\n            return this.$store.getters[\"global_params/getHistoryOption\"]\r\n        },\r\n\r\n        \r\n          //Paginacion\r\n        allItems () {\r\n            return Object.keys(this.data).map(pid => this.data[pid])\r\n        },\r\n        filteredItems () {\r\n        \r\n             return  this.allItems.slice((this.currentPage - 1) * this.itemsPerPage, this.currentPage * this.itemsPerPage )\r\n        },\r\n        totalPages () {\r\n            let total = Math.ceil(this.allItems.length / this.itemsPerPage)\r\n                if(total < this.currentPage){\r\n                this.currentPage =1\r\n                }\r\n        return total\r\n       },\r\n  },\r\n  methods:{\r\n        \r\n       ...mapActions('global_params', ['getAllInfoGlp']),\r\n           ...mapActions('global_params', ['setHistoryOptionGlp']),\r\n         ...mapActions('global_params', ['setAddedGlp']),\r\n\r\n\r\n         includesItem(search, name) {\r\n            if (search == \"\") {\r\n              return true;\r\n            }\r\n            name = name.toLowerCase();\r\n            search = search.toLowerCase();\r\n            if (search == \"\") {\r\n              return false;\r\n            }\r\n            return name.includes(search);\r\n         },\r\n\r\n\r\n           changeView(option, item){\r\n             this.item=item\r\n             this.setAddedGlp(item)\r\n             this.setHistoryOptionGlp(option)\r\n         },\r\n\r\n         activeRadius(){\r\n             this.radius? this.radius =false:  this.radius =true;\r\n         },\r\n\r\n         showModal: function(id){\r\n             this.itemDel =id;\r\n             this.viewModal=true\r\n         },\r\n         closeModal:function(){\r\n             this.viewModal=false;\r\n             this.itemDel =''\r\n         },\r\n\r\n           wait: function(){\r\n            setTimeout(() => this.$router.go(), 200);\r\n        },\r\n\r\n          delStatus: function () {\r\n            setTimeout(() => this.delMsgs()\r\n            ,2000);\r\n            setTimeout(() => this.wait()\r\n            ,500);\r\n            \r\n        },\r\n        delMsgs: function(){\r\n            this.status=\"\"\r\n            this.message=\"\"\r\n        },\r\n\r\n        eliminar: async function(){\r\n            let id = this.itemDel\r\n            this.status='';\r\n            this.message='';\r\n\r\n             let result = await this.$store.dispatch(\"global_params/deleteItemGlp\", {option: 'global_params', id:id});\r\n           \r\n            if(result.status=='error'){\r\n            this.message = result.message;\r\n            this.status='error'\r\n            this.delStatus()\r\n           \r\n            }else{\r\n                this.status='';\r\n                this.message='';\r\n                this.wait()\r\n            }\r\n         },\r\n\r\n\r\n\r\n\r\n\r\n\r\n         // botones de paginacion.\r\n         next () {\r\n          \r\n          if ( this.currentPage < this.totalPages) {\r\n            this.currentPage++\r\n          }\r\n        },\r\n        prev () {\r\n          if (this.currentPage > 1) {\r\n            this.currentPage--\r\n          }\r\n        },\r\n\r\n\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n\r\n.tbl_sub{\r\n      margin-top: 1.9791666666666665VW;\r\n         width: 39VW;\r\n}\r\n\r\n.tbl_items{\r\n      border-bottom: 1px solid var(--color-4);\r\n}\r\n\r\n.tbl_item{\r\n    overflow: auto;\r\n}\r\n      .tblh{\r\n            width: 10.78125VW;\r\n            height: 2.5VW;\r\n            background: var(--color-2);\r\n            border-right: 1px solid  var(--color-5);\r\n           \r\n      }\r\n       .tblh2{\r\n            width: 2.5VW;\r\n            height: 2.5VW;\r\n            background: var(--color-8);\r\n            border-right: 1px solid  var(--color-5);\r\n           \r\n      }\r\n      .tblh p{\r\n             padding-left: 1.3541666666666667VW;\r\n             color: var(--color-5);\r\n             font-size: 0.7291666666666666VW;\r\n             font-weight: 500;\r\n      }\r\n      .tblh2 p{\r\n             padding-top: 0.5VW;\r\n             padding-left: .3vw;\r\n             color: var(--color-5);\r\n             font-size: 0.46875VW;\r\n             font-weight: 700;\r\n      }\r\n\r\n       .icon_editar , .icon_eliminar{\r\n            width: 2.5VW;\r\n            height: 2.5VW; \r\n            \r\n      }\r\n\r\n       .icon_editar img , .icon_eliminar img{\r\n       \r\n             width:  0.8333333333333334VW;\r\n            height:   0.8333333333333334VW; \r\n            padding-top: .9vw;\r\n            padding-left: .9vw;\r\n            cursor: pointer;\r\n      }\r\n      .tblrad{\r\n            border-radius: 1.5vw 0vw 0vw 1.5vw;\r\n      }\r\n\r\n      .tblh2r{\r\n            border-radius:  0vw .5vw .5vw 0vw ;\r\n      }\r\n\r\n      .tbl_item{\r\n             width: 10.78125VW;\r\n      } .tbl_item p{\r\n             padding-left: 1.3541666666666667VW;\r\n             color: var(--color-4);\r\n      }\r\n\r\n      .mlf2{\r\n          margin-left: 21VW !important;\r\n      }\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}